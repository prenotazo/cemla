<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>
Architecture - Issue #44624: ESB and load balancing - TeraCode Project Management Tool    </title>
    <meta name="description" content="Redmine"/>
    <meta name="keywords" content="issue,bug,tracker"/>
    <link rel="shortcut icon" href="44624/favicon.ico.css"/>
    <link rel="stylesheet" type="text/css" media="all" href="44624/application.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="44624/jstoolbar.css"/>
    <style type="text/css">
* html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); } body {behavior: url(/stylesheets/csshover.htc?1293099743);}    </style>
<!-- page specific tags -->    <link rel="stylesheet" type="text/css" media="screen" href="44624/calendar.css"/>
    <link title="Architecture - Issue #44624: ESB and load balancing" rel="alternate" type="application/atom+xml" href="44624/44624.atom.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="44624/scm.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="44624/context_menu.css"/>
  </head>
  <body class="controller-issues action-show">
    <div id="wrapper">
      <div id="wrapper2">
        <div id="top-menu">
          <div id="account">
            <ul>
              <li>
                <a href="/my/account" class="my-account">
My account                </a>
              </li>
              <li>
                <a href="/logout" class="logout">
Sign out                </a>
              </li>
            </ul>
          </div>
          <div id="loggedas">
Logged in as            <a href="/users/490">
ricardo.castiglione            </a>
          </div>
          <ul>
            <li>
              <a href="/" class="home">
Home              </a>
            </li>
            <li>
              <a href="/my/page" class="my-page">
My page              </a>
            </li>
            <li>
              <a href="/projects" class="projects">
Projects              </a>
            </li>
            <li>
              <a href="http://www.redmine.org/guide" class="help">
Help              </a>
            </li>
          </ul>
        </div>
        <div id="header">
          <div id="quick-search">
            <form action="/search/index/lemonadearchitecture" method="get">
              <input name="issues" type="hidden" value="1"/>
              <a href="/search/index/lemonadearchitecture" accesskey="4">
Search              </a>
:              <input accesskey="f" class="small" id="q" name="q" size="20" type="text"/>
            </form>
            <select onchange="if (this.value != '') { window.location = this.value; }">
              <option value="">
Jump to a project...              </option>
              <option value="" disabled="disabled">
---              </option>
              <option value="/projects/lemonade?jump=issues">
Lemonade              </option>
              <option selected="selected" value="/projects/lemonadearchitecture?jump=issues">
  » Architecture              </option>
              <option value="/projects/diary?jump=issues">
  » Diary              </option>
              <option value="/projects/jobsite?jump=issues">
  » Jobsite              </option>
              <option value="/projects/personnel?jump=issues">
  » Personnel              </option>
              <option value="/projects/pupils?jump=issues">
  » Pupils              </option>
              <option value="/projects/intranet?jump=issues">
Intranet              </option>
              <option value="/projects/its?jump=issues">
IT - Technical Support              </option>
              <option value="/projects/processes?jump=issues">
TeraCode Processes              </option>
            </select>
          </div>
          <h1>
            <a href="/projects/lemonade?jump=issues" class="root">
Lemonade            </a>
» Architecture          </h1>
          <div id="main-menu">
            <ul>
              <li>
                <a href="/projects/lemonadearchitecture" class="overview">
Overview                </a>
              </li>
              <li>
                <a href="/projects/lemonadearchitecture/activity" class="activity">
Activity                </a>
              </li>
              <li>
                <a href="/projects/lemonadearchitecture/issues" class="issues selected">
Issues                </a>
              </li>
              <li>
                <a href="/projects/lemonadearchitecture/issues/new" accesskey="7" class="new-issue">
New issue                </a>
              </li>
              <li>
                <a href="/projects/lemonadearchitecture/issues/gantt" class="gantt">
Gantt                </a>
              </li>
              <li>
                <a href="/projects/lemonadearchitecture/issues/calendar" class="calendar">
Calendar                </a>
              </li>
              <li>
                <a href="/projects/lemonadearchitecture/documents" class="documents">
Documents                </a>
              </li>
              <li>
                <a href="/projects/lemonadearchitecture/wiki" class="wiki">
Wiki                </a>
              </li>
              <li>
                <a href="/projects/lemonadearchitecture/files" class="files">
Files                </a>
              </li>
              <li>
                <a href="/projects/lemonadearchitecture/settings" class="settings">
Settings                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="" id="main">
          <div id="sidebar">
            <h3>
Issues            </h3>
            <a href="/projects/lemonadearchitecture/issues?set_filter=1">
View all issues            </a>
            <br/>
            <a href="/projects/lemonadearchitecture/issues/report">
Summary            </a>
            <br/>
            <h3>
Graphs            </h3>
            <a href="/graphs/old_issues?project_id=lemonadearchitecture">
Open aging issues            </a>
            <br/>
            <a href="/graphs/issue_growth?project_id=lemonadearchitecture">
Total issues over time            </a>
            <br/>
            <a href="/projects/lemonadearchitecture/issues/calendar">
Calendar            </a>
            <br/>
            <a href="/projects/lemonadearchitecture/issues/gantt">
Gantt            </a>
            <br/>
            <div id="watchers">
              <div class="contextual">
                <a href="#" onclick="new Ajax.Request('/watchers/new?object_id=44624&amp;object_type=issue', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;">
Add                </a>
              </div>
              <h3>
Watchers (2)              </h3>
              <ul>
                <li>
Jorge Santoro                </li>
                <li>
                  <a href="/users/47">
Javier Posado                  </a>
                </li>
              </ul>
            </div>
          </div>
          <div id="content">
            <div class="contextual">
              <a href="/issues/44624/edit" accesskey="e" class="icon icon-edit" onclick="showAndScrollTo(&quot;update&quot;, &quot;notes&quot;); return false;">
Update              </a>
              <a href="/issues/44624/time_entries/new" class="icon icon-time-add">
Log time              </a>
              <span id="watcher">
                <a class="icon icon-fav-off" href="/watchers/watch?object_id=44624&amp;object_type=issue&amp;replace%5B%5D=watcher&amp;replace%5B%5D=watcher2" onclick="new Ajax.Request('/watchers/watch?object_id=44624&amp;object_type=issue&amp;replace%5B%5D=watcher&amp;replace%5B%5D=watcher2', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;">
Watch                </a>
              </span>
              <a href="/projects/lemonadearchitecture/issues/44624/copy" class="icon icon-duplicate">
Duplicate              </a>
            </div>
            <h2>
Issue #44624            </h2>
            <div class="issue status-9 priority-4 closed details">
              <div class="subject">
                <div>
                  <h3>
ESB and load balancing                  </h3>
                </div>
              </div>
              <p class="author">
Added by                <a href="/users/270">
Michael De Groeve                </a>
                <a href="/projects/lemonadearchitecture/activity?from=2010-11-15" title="11/15/2010 10:26 am">
almost 2 years                </a>
ago. Updated                <a href="/projects/lemonadearchitecture/activity?from=2011-09-23" title="09/23/2011 12:27 pm">
12 months                </a>
ago.              </p>
              <table class="attributes">
                <tbody>
                  <tr>
                    <th class="status">
Status:                    </th>
                    <td class="status">
Closed                    </td>
                    <th class="start-date">
Start Date:                    </th>
                    <td class="start-date">
11/15/2010                    </td>
                  </tr>
                  <tr>
                    <th class="priority">
Priority:                    </th>
                    <td class="priority">
High                    </td>
                    <th class="due-date">
Due date:                    </th>
                    <td class="due-date"/>
                  </tr>
                  <tr>
                    <th class="assigned-to">
Assigned to:                    </th>
                    <td class="assigned-to">
                      <a href="/users/47">
Javier Posado                      </a>
                    </td>
                    <th class="progress">
% Done:                    </th>
                    <td class="progress">
                      <table class="progress" style="width: 80px;">
                        <tbody>
                          <tr>
                            <td class="closed" style="width: 100%;"/>
                          </tr>
                        </tbody>
                      </table>
                      <p class="pourcent">
100%                      </p>
                    </td>
                  </tr>
                  <tr>
                    <th class="category">
Category:                    </th>
                    <td class="category">
-                    </td>
                    <th class="spent-time">
Spent time:                    </th>
                    <td class="spent-time">
-                    </td>
                  </tr>
                  <tr>
                    <th class="fixed-version">
Target version:                    </th>
                    <td class="fixed-version">
-                    </td>
                  </tr>
                </tbody>
              </table>
              <hr/>
              <div class="contextual">
                <a class="icon icon-comment" href="#" onclick="new Ajax.Request('/issues/44624/quoted', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;">
Quote                </a>
              </div>
              <p>
                <strong>
Description                </strong>
              </p>
              <div class="wiki">
                <p>
if we loadbalance (which we do for all apps), how do we avoid that two or more instances of a consumer receive the same message?                </p>
                <p>
relevant for pupils (listening to user messages) and care (listening to pupi messages) and all others (listening to vos messages) ...                </p>
                <p>
currently i let only one listen to the real queue, the others to a dummy queue                </p>
              </div>
              <div class="attachments">
                <p>
                  <a href="attachments/15133/EmbeddedBrokers.java" class="icon icon-attachment">
EmbeddedBrokers.java                  </a>
- Embedded brokers with central broker                  <span class="size">
(4 kB)                  </span>
                  <a href="attachments/destroy/15133" class="delete" onclick="if (confirm('Are you sure ?')) { var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', 'kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg='); f.appendChild(s);f.submit(); };return false;" title="Delete">
                    <img alt="Delete" src="44624/delete.png"/>
                  </a>
                  <span class="author">
Javier Posado, 12/15/2010 01:25 pm                  </span>
                </p>
              </div>
              <hr/>
              <div id="issue_tree">
                <div class="contextual">
                  <a href="/projects/lemonadearchitecture/issues/new?issue%5Bparent_issue_id%5D=44624">
Add                  </a>
                </div>
                <p>
                  <strong>
Subtasks                  </strong>
                </p>
              </div>
              <hr/>
              <div id="relations">
                <div class="contextual">
                  <a href="#" onclick="Element.toggle('new-relation-form'); Form.Element.focus('relation_issue_to_id'); return false;">
Add                  </a>
                </div>
                <p>
                  <strong>
Related issues                  </strong>
                </p>
                <table style="width:100%">
                  <tbody>
                    <tr>
                      <td>
related to Personnel -                        <a href="47721.html" class="issue status-9 priority-3 closed created-by-me assigned-to-me">
Improvement #47721                        </a>
: Change ActiveMQ Version to 5.3.2 and Test                      </td>
                      <td>
Closed                      </td>
                      <td>
12/28/2010                      </td>
                      <td/>
                      <td>
                        <a href="#" onclick="new Ajax.Request('/issues/44624/relations/4106/destroy', {asynchronous:true, evalScripts:true, method:'post', parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;" title="Delete relation">
                          <img alt="Delete" src="44624/delete_1.png"/>
                        </a>
                      </td>
                    </tr>
                    <tr>
                      <td>
related to Pupils -                        <a href="47722.html" class="issue status-9 priority-3 closed created-by-me assigned-to-me">
Improvement #47722                        </a>
: Change ActiveMQ Version to 5.3.2 and Test                      </td>
                      <td>
Closed                      </td>
                      <td>
12/28/2010                      </td>
                      <td/>
                      <td>
                        <a href="#" onclick="new Ajax.Request('/issues/44624/relations/4107/destroy', {asynchronous:true, evalScripts:true, method:'post', parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;" title="Delete relation">
                          <img alt="Delete" src="44624/delete_2.png"/>
                        </a>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <form action="/issues/44624/relations/44624" id="new-relation-form" method="post" onsubmit="new Ajax.Request('/issues/44624/relations/44624', {asynchronous:true, evalScripts:true, method:'post', onComplete:function(request){Form.Element.focus('relation_issue_to_id');}, parameters:Form.serialize(this)}); return false;" style="display: none;">
                  <div style="margin:0;padding:0;display:inline">
                    <input name="authenticity_token" type="hidden" value="kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg="/>
                  </div>
                  <p>
                    <select id="relation_relation_type" name="relation[relation_type]" onchange="setPredecessorFieldsVisibility();">
                      <option selected="selected" value="relates">
                      </option>
                      <option value="duplicates">
                      </option>
                      <option value="duplicated">
                      </option>
                      <option value="blocks">
                      </option>
                      <option value="blocked">
                      </option>
                      <option value="precedes">
                      </option>
                      <option value="follows">
                      </option>
                    </select>
                    <input id="relation_issue_to_id" name="relation[issue_to_id]" size="6" type="text"/>
                    <span id="predecessor_fields" style="display: none;">
                      <input id="relation_delay" name="relation[delay]" size="3" type="text"/>
                    </span>
                    <input name="commit" type="submit" value="Add"/>
                    <a href="#" onclick="Element.toggle('new-relation-form'); this.blur(); return false;">
                    </a>
                  </p>
                </form>
              </div>
            </div>
            <div id="history">
              <h3>
History              </h3>
              <div id="change-172244" class="journal has-notes">
                <h4>
                  <div class="journal-link">
                    <a href="/issues/44624#note-1">
#1                    </a>
                  </div>
                  <a name="note-1"/>
Updated by Jorge Santoro                  <a href="/projects/lemonadearchitecture/activity?from=2010-11-15" title="11/15/2010 11:34 am">
almost 2 years                  </a>
ago                </h4>
                <div class="wiki" id="journal-172244-notes">
                  <div class="contextual">
                    <a href="#" onclick="new Ajax.Request('/issues/44624/quoted?journal_id=172244', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;" title="Quote">
                      <img alt="Comment" src="44624/comment.png"/>
                    </a>
                  </div>
                  <p>
Probably we need to implement a solution which communicates all the instances of one projects and determines which instance is the one that will consumes the messages.                    <br/>
Is there any restriction?                    <br/>
Right now if two or more instances consume the same message, does it cause an error?                    <br/>
Do we need to replicate the result of the message in the different instances? or the consumer should consume the message and update the db state?                    <br/>
If we are using 2nd level cache in any project we need to take into account that, because we need to refresh the cache of the not consuming instances.                  </p>
                </div>
              </div>
              <div id="change-172667" class="journal has-notes">
                <h4>
                  <div class="journal-link">
                    <a href="/issues/44624#note-2">
#2                    </a>
                  </div>
                  <a name="note-2"/>
Updated by                  <a href="/users/270">
Michael De Groeve                  </a>
                  <a href="/projects/lemonadearchitecture/activity?from=2010-11-16" title="11/16/2010 05:26 am">
almost 2 years                  </a>
ago                </h4>
                <div class="wiki" id="journal-172667-notes">
                  <div class="contextual">
                    <a href="#" onclick="new Ajax.Request('/issues/44624/quoted?journal_id=172667', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;" title="Quote">
                      <img alt="Comment" src="44624/comment_1.png"/>
                    </a>
                  </div>
                  <p>
good questions, check with the app team leaders to understand the messages and what they do, then we can discuss this on our friday meeting                  </p>
                </div>
              </div>
              <div id="change-173180" class="journal has-notes">
                <h4>
                  <div class="journal-link">
                    <a href="/issues/44624#note-3">
#3                    </a>
                  </div>
                  <a name="note-3"/>
Updated by                  <a href="/users/47">
Javier Posado                  </a>
                  <a href="/projects/lemonadearchitecture/activity?from=2010-11-17" title="11/17/2010 03:20 pm">
almost 2 years                  </a>
ago                </h4>
                <div class="wiki" id="journal-173180-notes">
                  <div class="contextual">
                    <a href="#" onclick="new Ajax.Request('/issues/44624/quoted?journal_id=173180', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;" title="Quote">
                      <img alt="Comment" src="44624/comment_2.png"/>
                    </a>
                  </div>
                  <p>
                    <a class="external" href="http://activemq.apache.org/exclusive-consumer.html">
http://activemq.apache.org/exclusive-consumer.html                    </a>
can help to this issue                  </p>
                </div>
              </div>
              <div id="change-173674" class="journal has-notes">
                <h4>
                  <div class="journal-link">
                    <a href="/issues/44624#note-4">
#4                    </a>
                  </div>
                  <a name="note-4"/>
Updated by                  <a href="/users/270">
Michael De Groeve                  </a>
                  <a href="/projects/lemonadearchitecture/activity?from=2010-11-19" title="11/19/2010 07:30 am">
almost 2 years                  </a>
ago                </h4>
                <div class="wiki" id="journal-173674-notes">
                  <div class="contextual">
                    <a href="#" onclick="new Ajax.Request('/issues/44624/quoted?journal_id=173674', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;" title="Quote">
                      <img alt="Comment" src="44624/comment_3.png"/>
                    </a>
                  </div>
                  <p>
ah, but if i understand it correctly (ordering is less important for us) we can have multiple JMS sessions listening to the same QUEUE, the one that gets the message first will process it, the other not? In that case, we can just configure both instances to listen to the same queue of the virtual topic? (they used to each be subscribed to the same topic, resulting in double message receives)                  </p>
                  <p>
in any case, your suggestion is a good one                  </p>
                </div>
              </div>
              <div id="change-173692" class="journal has-notes">
                <h4>
                  <div class="journal-link">
                    <a href="/issues/44624#note-5">
#5                    </a>
                  </div>
                  <a name="note-5"/>
Updated by Jorge Santoro                  <a href="/projects/lemonadearchitecture/activity?from=2010-11-19" title="11/19/2010 11:46 am">
almost 2 years                  </a>
ago                </h4>
                <div class="wiki" id="journal-173692-notes">
                  <div class="contextual">
                    <a href="#" onclick="new Ajax.Request('/issues/44624/quoted?journal_id=173692', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;" title="Quote">
                      <img alt="Comment" src="44624/comment_4.png"/>
                    </a>
                  </div>
                  <p>
We need to test it.                    <br/>
Michael, when do you want us to start doing this?                  </p>
                </div>
              </div>
              <div id="change-173976" class="journal has-notes">
                <h4>
                  <div class="journal-link">
                    <a href="/issues/44624#note-6">
#6                    </a>
                  </div>
                  <a name="note-6"/>
Updated by                  <a href="/users/270">
Michael De Groeve                  </a>
                  <a href="/projects/lemonadearchitecture/activity?from=2010-11-22" title="11/22/2010 02:48 pm">
almost 2 years                  </a>
ago                </h4>
                <div class="wiki" id="journal-173976-notes">
                  <div class="contextual">
                    <a href="#" onclick="new Ajax.Request('/issues/44624/quoted?journal_id=173976', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;" title="Quote">
                      <img alt="Comment" src="44624/comment_5.png"/>
                    </a>
                  </div>
                  <p>
i'm deploying all in test tomorrow, i hope to go to production (where we loadbalance) during this week. I will test my solution (2 instances listening to the same virtual topic = queue) there, i'll keep you posted                  </p>
                </div>
              </div>
              <div id="change-173981" class="journal has-notes">
                <h4>
                  <div class="journal-link">
                    <a href="/issues/44624#note-7">
#7                    </a>
                  </div>
                  <a name="note-7"/>
Updated by                  <a href="/users/47">
Javier Posado                  </a>
                  <a href="/projects/lemonadearchitecture/activity?from=2010-11-22" title="11/22/2010 04:18 pm">
almost 2 years                  </a>
ago                </h4>
                <div class="wiki" id="journal-173981-notes">
                  <div class="contextual">
                    <a href="#" onclick="new Ajax.Request('/issues/44624/quoted?journal_id=173981', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;" title="Quote">
                      <img alt="Comment" src="44624/comment_6.png"/>
                    </a>
                  </div>
                  <p>
Producer need to be tested too with loadbalance. The embedded broker is using db persistence and it has the property useDatabaseLock in false so more than one broker can use the same db but I am not sure if it works fine.                    <a class="external" href="http://activemq.apache.org/can-two-brokers-share-the-same-database.html">
http://activemq.apache.org/can-two-brokers-share-the-same-database.html                    </a>
                  </p>
                </div>
              </div>
              <div id="change-180485" class="journal has-notes">
                <h4>
                  <div class="journal-link">
                    <a href="/issues/44624#note-8">
#8                    </a>
                  </div>
                  <a name="note-8"/>
Updated by                  <a href="/users/270">
Michael De Groeve                  </a>
                  <a href="/projects/lemonadearchitecture/activity?from=2010-12-15" title="12/15/2010 11:18 am">
over 1 year                  </a>
ago                </h4>
                <div class="wiki" id="journal-180485-notes">
                  <div class="contextual">
                    <a href="#" onclick="new Ajax.Request('/issues/44624/quoted?journal_id=180485', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;" title="Quote">
                      <img alt="Comment" src="44624/comment_7.png"/>
                    </a>
                  </div>
                  <p>
just tested, this idd doesn't work (3 instances opening a network connector to the central broker blocks all)                  </p>
                  <p>
2 options i guess (from dimi):                    <br/>
1/ use local file storage instead of DB persistence:                    <br/>
- pro: simple to configure                    <br/>
- con: difficult to browse in queues, no backup on disk craches, ...                    <br/>
2/ use seperate activeMQ table names per tomcat                    <br/>
- pro: easy to browse queues, use DB backup systems that are already in place, ...                    <br/>
- con: i'm not sure you can do this... is this configurable somewhere?                  </p>
                </div>
              </div>
              <div id="change-180598" class="journal has-notes">
                <h4>
                  <div class="journal-link">
                    <a href="/issues/44624#note-9">
#9                    </a>
                  </div>
                  <a name="note-9"/>
Updated by                  <a href="/users/47">
Javier Posado                  </a>
                  <a href="/projects/lemonadearchitecture/activity?from=2010-12-15" title="12/15/2010 01:24 pm">
over 1 year                  </a>
ago                </h4>
                <div class="wiki" id="journal-180598-notes">
                  <div class="contextual">
                    <a href="#" onclick="new Ajax.Request('/issues/44624/quoted?journal_id=180598', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;" title="Quote">
                      <img alt="Comment" src="44624/comment_8.png"/>
                    </a>
                  </div>
                  <p>
Option 2 works fine. We have to set the "statements" in persistenceAdapter. We can use a prefix for the 3 created tables or set the names for them.                    <br/>
                    <pre>
BrokerService broker = new BrokerService(); broker.setBrokerName("EmbeddedBroker"); JDBCPersistenceAdapter jdbc = new JDBCPersistenceAdapter(); broker.setPersistenceAdapter(jdbc); // Set table prefix Statements statement = new Statements(); statement.setTablePrefix("Brkr1"); jdbc.setStatements(statement);                    </pre>
                  </p>
                  <p>
or                  </p>
                  <pre>
BrokerService broker = new BrokerService(); broker.setBrokerName("EmbeddedBroker"); JDBCPersistenceAdapter jdbc = new JDBCPersistenceAdapter(); broker.setPersistenceAdapter(jdbc); // Set name of tables Statements statement = new Statements(); statement.setMessageTableName("ACTIVEMQ_MSGS_1"); statement.setLockTableName("ACTIVEMQ_LOCK_1"); statement.setDurableSubAcksTableName("ACTIVEMQ_ACKS_1"); jdbc.setStatements(statement);                  </pre>
                  <p>
for Spring:                    <br/>
                    <pre>
<bean id="statements" class="org.apache.activemq.store.jdbc.Statements"> <property name="tablePrefix" value="{brokerService.tablePrefix}"/> </bean> <bean id="brokerService" class="be.b3s.core.broker.BrokerService" init-method="start" destroy-method="stop"> <property name="persistenceAdapter"> <bean class="org.apache.activemq.store.jdbc.JDBCPersistenceAdapter"> <property name="dataSource" ref="dataSource"/> <property name="createTablesOnStartup" value="true" /> <property name="useDatabaseLock" value="false" /> <property name="statements" ref="statements" /> </bean> </property> <property name="useJmx" value="${brokerService.useJmx}" /> <property name="dataDirectory" value="${brokerService.dataDirectory}" /> <property name="brokerName" value="${brokerService.brokerName}" /> <property name="centralBroker" value="${brokerService.centralBroker}"/> </bean>                    </pre>
                  </p>
                </div>
              </div>
              <div id="change-180600" class="journal has-details">
                <h4>
                  <div class="journal-link">
                    <a href="/issues/44624#note-10">
#10                    </a>
                  </div>
                  <a name="note-10"/>
Updated by                  <a href="/users/47">
Javier Posado                  </a>
                  <a href="/projects/lemonadearchitecture/activity?from=2010-12-15" title="12/15/2010 01:25 pm">
over 1 year                  </a>
ago                </h4>
                <ul class="details">
                  <li>
                    <strong>
File                    </strong>
                    <a href="attachments/15133/EmbeddedBrokers.java">
EmbeddedBrokers.java                    </a>
added                  </li>
                </ul>
              </div>
              <div id="change-180625" class="journal has-notes">
                <h4>
                  <div class="journal-link">
                    <a href="/issues/44624#note-11">
#11                    </a>
                  </div>
                  <a name="note-11"/>
Updated by                  <a href="/users/270">
Michael De Groeve                  </a>
                  <a href="/projects/lemonadearchitecture/activity?from=2010-12-15" title="12/15/2010 02:01 pm">
over 1 year                  </a>
ago                </h4>
                <div class="wiki" id="journal-180625-notes">
                  <div class="contextual">
                    <a href="#" onclick="new Ajax.Request('/issues/44624/quoted?journal_id=180625', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;" title="Quote">
                      <img alt="Comment" src="44624/comment_9.png"/>
                    </a>
                  </div>
                  <p>
ok i'll try                  </p>
                  <p>
i'll set useDatabaseLock = true again, no?                  </p>
                </div>
              </div>
              <div id="change-180632" class="journal has-notes">
                <h4>
                  <div class="journal-link">
                    <a href="/issues/44624#note-12">
#12                    </a>
                  </div>
                  <a name="note-12"/>
Updated by                  <a href="/users/47">
Javier Posado                  </a>
                  <a href="/projects/lemonadearchitecture/activity?from=2010-12-15" title="12/15/2010 02:49 pm">
over 1 year                  </a>
ago                </h4>
                <div class="wiki" id="journal-180632-notes">
                  <div class="contextual">
                    <a href="#" onclick="new Ajax.Request('/issues/44624/quoted?journal_id=180632', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;" title="Quote">
                      <img alt="Comment" src="44624/comment_10.png"/>
                    </a>
                  </div>
                  <p>
useDatabaseLock = true means that a broker try an acquire an exclusive lock on ACTIVEMQ_LOCK table and any other brokers can't use that shared table, so they can't start (JDBC Master Slave). If we use different names in the lock table per broker, useDatabaseLock is not important.                  </p>
                </div>
              </div>
              <div id="change-180695" class="journal has-details">
                <h4>
                  <div class="journal-link">
                    <a href="/issues/44624#note-13">
#13                    </a>
                  </div>
                  <a name="note-13"/>
Updated by Jorge Santoro                  <a href="/projects/lemonadearchitecture/activity?from=2010-12-15" title="12/15/2010 03:58 pm">
over 1 year                  </a>
ago                </h4>
                <ul class="details">
                  <li>
                    <strong>
Assigned to                    </strong>
changed from                    <i>
Jorge Santoro                    </i>
to                    <i>
Javier Posado                    </i>
                  </li>
                </ul>
              </div>
              <div id="change-183715" class="journal has-notes">
                <h4>
                  <div class="journal-link">
                    <a href="/issues/44624#note-14">
#14                    </a>
                  </div>
                  <a name="note-14"/>
Updated by                  <a href="/users/270">
Michael De Groeve                  </a>
                  <a href="/projects/lemonadearchitecture/activity?from=2010-12-27" title="12/27/2010 05:15 am">
over 1 year                  </a>
ago                </h4>
                <div class="wiki" id="journal-183715-notes">
                  <div class="contextual">
                    <a href="#" onclick="new Ajax.Request('/issues/44624/quoted?journal_id=183715', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;" title="Quote">
                      <img alt="Comment" src="44624/comment_11.png"/>
                    </a>
                  </div>
                  <p>
after installing this version in production, we get (for mysql databases) exhausted connection pools. It seems ActiveMQ is using connections and not giving them back to the pool                  </p>
                  <p>
eg. all threads in the tomcat are locked:                  </p>
                  <p>
"http-80-Processor6" - Thread t@64                    <br/>
java.lang.Thread.State: RUNNABLE                    <br/>
at java.net.SocketInputStream.socketRead0(Native Method)                    <br/>
at java.net.SocketInputStream.read(SocketInputStream.java:129)                    <br/>
at com.mysql.jdbc.util.ReadAheadInputStream.fill(ReadAheadInputStream.java:113)                    <br/>
at com.mysql.jdbc.util.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(ReadAheadInputStream.java:160)                    <br/>
at com.mysql.jdbc.util.ReadAheadInputStream.read(ReadAheadInputStream.java:188)                    <br/>
- locked com.mysql.jdbc.util.ReadAheadInputStream@1d80c71                    <br/>
at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:1960)                    <br/>
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2375)                    <br/>
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2874)                    <br/>
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1623)                    <br/>
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1715)                    <br/>
at com.mysql.jdbc.Connection.execSQL(Connection.java:3249)                    <br/>
- locked java.lang.Object@118d7dd                    <br/>
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1268)                    <br/>
at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1541)                    <br/>
- locked java.lang.Object@118d7dd                    <br/>
at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1455)                    <br/>
at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1440)                    <br/>
at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:101)                  </p>
                </div>
              </div>
              <div id="change-183857" class="journal has-notes">
                <h4>
                  <div class="journal-link">
                    <a href="/issues/44624#note-15">
#15                    </a>
                  </div>
                  <a name="note-15"/>
Updated by                  <a href="/users/47">
Javier Posado                  </a>
                  <a href="/projects/lemonadearchitecture/activity?from=2010-12-27" title="12/27/2010 01:06 pm">
over 1 year                  </a>
ago                </h4>
                <div class="wiki" id="journal-183857-notes">
                  <div class="contextual">
                    <a href="#" onclick="new Ajax.Request('/issues/44624/quoted?journal_id=183857', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;" title="Quote">
                      <img alt="Comment" src="44624/comment_12.png"/>
                    </a>
                  </div>
                  <p>
there is an issue about "Connection pool exhausted in JDBC master-slave when slave tries to acquire lock                    <a class="external" href="https://issues.apache.org/jira/browse/AMQ-2296">
https://issues.apache.org/jira/browse/AMQ-2296                    </a>
" and pupils/plato is using 5.3.0.4-fuse that doesn't have the patch for it in the DefaultDatabaseLocker class. we need to change the version of activemq in the pom to 5.3.1 or higher or change useDatabaseLock = false.                  </p>
                </div>
              </div>
              <div id="change-184096" class="journal has-notes">
                <h4>
                  <div class="journal-link">
                    <a href="/issues/44624#note-16">
#16                    </a>
                  </div>
                  <a name="note-16"/>
Updated by                  <a href="/users/270">
Michael De Groeve                  </a>
                  <a href="/projects/lemonadearchitecture/activity?from=2010-12-28" title="12/28/2010 07:49 am">
over 1 year                  </a>
ago                </h4>
                <div class="wiki" id="journal-184096-notes">
                  <div class="contextual">
                    <a href="#" onclick="new Ajax.Request('/issues/44624/quoted?journal_id=184096', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;" title="Quote">
                      <img alt="Comment" src="44624/comment_13.png"/>
                    </a>
                  </div>
                  <p>
ok, i already set the useDatabaseLock = false yesterday, and idd it's no longer a problem, luckily.                  </p>
                  <p>
can you tell the team leads to move to 5.3.2 anyway in the next sprint (or 5.4.2), it's probably better not to use a x.x.0 version if i see how many bugs are solved in the .1 and the .2 versions.                  </p>
                  <p>
thx                  </p>
                </div>
              </div>
              <div id="change-280624" class="journal has-notes has-details">
                <h4>
                  <div class="journal-link">
                    <a href="/issues/44624#note-17">
#17                    </a>
                  </div>
                  <a name="note-17"/>
Updated by                  <a href="/users/47">
Javier Posado                  </a>
                  <a href="/projects/lemonadearchitecture/activity?from=2011-09-23" title="09/23/2011 12:27 pm">
12 months                  </a>
ago                </h4>
                <ul class="details">
                  <li>
                    <strong>
Status                    </strong>
changed from                    <i>
New                    </i>
to                    <i>
Closed                    </i>
                  </li>
                  <li>
                    <strong>
% Done                    </strong>
changed from                    <i>
0                    </i>
to                    <i>
100                    </i>
                  </li>
                </ul>
                <div class="wiki" id="journal-280624-notes">
                  <div class="contextual">
                    <a href="#" onclick="new Ajax.Request('/issues/44624/quoted?journal_id=280624', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;" title="Quote">
                      <img alt="Comment" src="44624/comment_14.png"/>
                    </a>
                  </div>
                  <p>
The activemq in the applications was updated to 5.3.2                  </p>
                </div>
              </div>
            </div>
            <div style="clear: both;">
            </div>
            <div class="contextual">
              <a href="/issues/44624/edit" accesskey="e" class="icon icon-edit" onclick="showAndScrollTo(&quot;update&quot;, &quot;notes&quot;); return false;">
Update              </a>
              <a href="/issues/44624/time_entries/new" class="icon icon-time-add">
Log time              </a>
              <span id="watcher2">
                <a class="icon icon-fav-off" href="/watchers/watch?object_id=44624&amp;object_type=issue&amp;replace%5B%5D=watcher&amp;replace%5B%5D=watcher2" onclick="new Ajax.Request('/watchers/watch?object_id=44624&amp;object_type=issue&amp;replace%5B%5D=watcher&amp;replace%5B%5D=watcher2', {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;">
Watch                </a>
              </span>
              <a href="/projects/lemonadearchitecture/issues/44624/copy" class="icon icon-duplicate">
Duplicate              </a>
            </div>
            <div style="clear: both;">
            </div>
            <div id="update" style="display:none;">
              <h3>
              </h3>
              <form action="/issues/44624/edit" enctype="multipart/form-data" id="issue-form" method="post">
                <div style="margin:0;padding:0;display:inline">
                  <input name="_method" type="hidden" value="put"/>
                  <input name="authenticity_token" type="hidden" value="kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg="/>
                </div>
                <div class="box">
                  <fieldset class="tabular">
                    <legend>
                      <small>
                        <a href="44624.html" onclick="Effect.toggle(&quot;issue_descr_fields&quot;, &quot;appear&quot;, {duration:0.3}); return false;">
                        </a>
                      </small>
                    </legend>
                    <div id="issue_descr_fields" style="display:none">
                      <p>
                        <label for="issue_tracker_id">
                          <span class="required">
                          </span>
                        </label>
                        <select id="issue_tracker_id" name="issue[tracker_id]">
                          <option value="4">
                          </option>
                          <option value="7">
                          </option>
                          <option selected="selected" value="8">
                          </option>
                        </select>
                      </p>
                      <p>
                        <label for="issue_subject">
                          <span class="required">
                          </span>
                        </label>
                        <input id="issue_subject" name="issue[subject]" size="80" type="text" value="ESB and load balancing"/>
                      </p>
                      <p id="parent_issue">
                        <label for="issue_parent_issue_id">
                        </label>
                        <input id="issue_parent_issue_id" name="issue[parent_issue_id]" size="10" type="text" autocomplete="off"/>
                      </p>
                      <div id="parent_issue_candidates" class="autocomplete" style="display: none;">
                      </div>
                      <p>
                        <label for="issue_description">
                        </label>
                        <div class="jstElements">
                          <div class="help">
                            <a href="/help/wiki_syntax.html" onclick="window.open(&quot;/help/wiki_syntax.html&quot;, &quot;&quot;, &quot;resizable=yes, location=no, width=300, height=640, menubar=no, status=no, scrollbars=yes&quot;); return false;">
                            </a>
                          </div>
                          <button type="button" tabindex="200" class="jstb_strong" title="Strong">
                            <span>
                            </span>
                          </button>
                          <button type="button" tabindex="200" class="jstb_em" title="Italic">
                            <span>
                            </span>
                          </button>
                          <button type="button" tabindex="200" class="jstb_ins" title="Underline">
                            <span>
                            </span>
                          </button>
                          <button type="button" tabindex="200" class="jstb_del" title="Deleted">
                            <span>
                            </span>
                          </button>
                          <button type="button" tabindex="200" class="jstb_code" title="Inline Code">
                            <span>
                            </span>
                          </button>
                          <span id="space1" class="jstSpacer">
                          </span>
                          <button type="button" tabindex="200" class="jstb_h1" title="Heading 1">
                            <span>
                            </span>
                          </button>
                          <button type="button" tabindex="200" class="jstb_h2" title="Heading 2">
                            <span>
                            </span>
                          </button>
                          <button type="button" tabindex="200" class="jstb_h3" title="Heading 3">
                            <span>
                            </span>
                          </button>
                          <span id="space2" class="jstSpacer">
                          </span>
                          <button type="button" tabindex="200" class="jstb_ul" title="Unordered list">
                            <span>
                            </span>
                          </button>
                          <button type="button" tabindex="200" class="jstb_ol" title="Ordered list">
                            <span>
                            </span>
                          </button>
                          <span id="space3" class="jstSpacer">
                          </span>
                          <button type="button" tabindex="200" class="jstb_bq" title="Quote">
                            <span>
                            </span>
                          </button>
                          <button type="button" tabindex="200" class="jstb_unbq" title="Remove Quote">
                            <span>
                            </span>
                          </button>
                          <button type="button" tabindex="200" class="jstb_pre" title="Preformatted text">
                            <span>
                            </span>
                          </button>
                          <span id="space4" class="jstSpacer">
                          </span>
                          <button type="button" tabindex="200" class="jstb_link" title="Link to a Wiki page">
                            <span>
                            </span>
                          </button>
                          <button type="button" tabindex="200" class="jstb_img" title="Image">
                            <span>
                            </span>
                          </button>
                        </div>
                        <div class="jstEditor">
                          <textarea accesskey="e" class="wiki-edit" cols="60" id="issue_description" name="issue[description]" rows="10">
                          </textarea>
                        </div>
                      </p>
                    </div>
                    <div id="attributes" class="attributes">
                      <div class="splitcontentleft">
                        <p>
                          <label for="issue_status_id">
                            <span class="required">
                            </span>
                          </label>
                          <select id="issue_status_id" name="issue[status_id]">
                            <option value="8">
                            </option>
                            <option selected="selected" value="5">
                            </option>
                            <option value="20">
                            </option>
                          </select>
                        </p>
                        <p>
                          <label for="issue_priority_id">
                            <span class="required">
                            </span>
                          </label>
                          <select id="issue_priority_id" name="issue[priority_id]">
                            <option value="15">
                            </option>
                            <option value="3">
                            </option>
                            <option value="4">
                            </option>
                            <option selected="selected" value="5">
                            </option>
                            <option value="6">
                            </option>
                            <option value="7">
                            </option>
                          </select>
                        </p>
                        <p>
                          <label for="issue_assigned_to_id">
                          </label>
                          <select id="issue_assigned_to_id" name="issue[assigned_to_id]">
                            <option value=""/>
                            <option value="14">
                            </option>
                            <option value="683">
                            </option>
                            <option selected="selected" value="47">
                            </option>
                            <option value="270">
                            </option>
                            <option value="102">
                            </option>
                            <option value="490">
                            </option>
                          </select>
                        </p>
                      </div>
                      <div class="splitcontentright">
                        <p>
                          <label for="issue_start_date">
                          </label>
                          <input id="issue_start_date" name="issue[start_date]" size="10" type="text" value="2010-11-15"/>
                          <img id="issue_start_date_trigger" alt="Calendar" class="calendar-trigger" src="44624/calendar.png"/>
                        </p>
                        <p>
                          <label for="issue_due_date">
                          </label>
                          <input id="issue_due_date" name="issue[due_date]" size="10" type="text"/>
                          <img id="issue_due_date_trigger" alt="Calendar" class="calendar-trigger" src="44624/calendar_1.png"/>
                        </p>
                        <p>
                          <label for="issue_estimated_hours">
                          </label>
                          <input id="issue_estimated_hours" name="issue[estimated_hours]" size="3" type="text"/>
                        </p>
                        <p>
                          <label for="issue_done_ratio">
                          </label>
                          <select id="issue_done_ratio" name="issue[done_ratio]">
                            <option value="0">
                            </option>
                            <option value="10">
                            </option>
                            <option value="20">
                            </option>
                            <option value="30">
                            </option>
                            <option value="40">
                            </option>
                            <option value="50">
                            </option>
                            <option value="60">
                            </option>
                            <option value="70">
                            </option>
                            <option value="80">
                            </option>
                            <option value="90">
                            </option>
                            <option selected="selected" value="100">
                            </option>
                          </select>
                        </p>
                      </div>
                      <div style="clear:both;">
                      </div>
                      <div class="splitcontentleft">
                      </div>
                      <div style="clear:both;">
                      </div>
                    </div>
                  </fieldset>
                  <fieldset class="tabular">
                    <legend>
                    </legend>
                    <div class="splitcontentleft">
                      <p>
                        <label for="time_entry_hours">
                        </label>
                        <input id="time_entry_hours" label="label_spent_time" name="time_entry[hours]" size="6" type="text"/>
                      </p>
                    </div>
                    <div class="splitcontentright">
                      <p>
                        <label for="time_entry_activity_id">
                        </label>
                        <select id="time_entry_activity_id" name="time_entry[activity_id]">
                          <option selected="selected" value="">
                          </option>
                          <option value="8">
                          </option>
                          <option value="9">
                          </option>
                          <option value="11">
                          </option>
                          <option value="13">
                          </option>
                          <option value="18">
                          </option>
                          <option value="19">
                          </option>
                          <option value="20">
                          </option>
                          <option value="22">
                          </option>
                        </select>
                      </p>
                    </div>
                    <p>
                      <label for="time_entry_comments">
                      </label>
                      <input id="time_entry_comments" name="time_entry[comments]" size="60" type="text"/>
                    </p>
                  </fieldset>
                  <fieldset>
                    <legend>
                    </legend>
                    <div class="jstElements">
                      <div class="help">
                        <a href="/help/wiki_syntax.html" onclick="window.open(&quot;/help/wiki_syntax.html&quot;, &quot;&quot;, &quot;resizable=yes, location=no, width=300, height=640, menubar=no, status=no, scrollbars=yes&quot;); return false;">
                        </a>
                      </div>
                      <button type="button" tabindex="200" class="jstb_strong" title="Strong">
                        <span>
                        </span>
                      </button>
                      <button type="button" tabindex="200" class="jstb_em" title="Italic">
                        <span>
                        </span>
                      </button>
                      <button type="button" tabindex="200" class="jstb_ins" title="Underline">
                        <span>
                        </span>
                      </button>
                      <button type="button" tabindex="200" class="jstb_del" title="Deleted">
                        <span>
                        </span>
                      </button>
                      <button type="button" tabindex="200" class="jstb_code" title="Inline Code">
                        <span>
                        </span>
                      </button>
                      <span id="space1" class="jstSpacer">
                      </span>
                      <button type="button" tabindex="200" class="jstb_h1" title="Heading 1">
                        <span>
                        </span>
                      </button>
                      <button type="button" tabindex="200" class="jstb_h2" title="Heading 2">
                        <span>
                        </span>
                      </button>
                      <button type="button" tabindex="200" class="jstb_h3" title="Heading 3">
                        <span>
                        </span>
                      </button>
                      <span id="space2" class="jstSpacer">
                      </span>
                      <button type="button" tabindex="200" class="jstb_ul" title="Unordered list">
                        <span>
                        </span>
                      </button>
                      <button type="button" tabindex="200" class="jstb_ol" title="Ordered list">
                        <span>
                        </span>
                      </button>
                      <span id="space3" class="jstSpacer">
                      </span>
                      <button type="button" tabindex="200" class="jstb_bq" title="Quote">
                        <span>
                        </span>
                      </button>
                      <button type="button" tabindex="200" class="jstb_unbq" title="Remove Quote">
                        <span>
                        </span>
                      </button>
                      <button type="button" tabindex="200" class="jstb_pre" title="Preformatted text">
                        <span>
                        </span>
                      </button>
                      <span id="space4" class="jstSpacer">
                      </span>
                      <button type="button" tabindex="200" class="jstb_link" title="Link to a Wiki page">
                        <span>
                        </span>
                      </button>
                      <button type="button" tabindex="200" class="jstb_img" title="Image">
                        <span>
                        </span>
                      </button>
                    </div>
                    <div class="jstEditor">
                      <textarea class="wiki-edit" cols="60" id="notes" name="notes" rows="10">
                      </textarea>
                    </div>
                    <p>
                      <br/>
                      <span id="attachments_fields">
                        <input name="attachments[1][file]" size="30" type="file" value=""/>
                        <label class="inline">
                          <span id="attachment_description_label_content">
                          </span>
                          <input name="attachments[1][description]" size="60" type="text" value=""/>
                        </label>
                      </span>
                      <br/>
                      <small>
                        <a href="#" onclick="addFileField(); return false;">
                        </a>
                      </small>
                    </p>
                  </fieldset>
                </div>
                <input id="issue_lock_version" name="issue[lock_version]" type="hidden" value="17"/>
                <input name="commit" type="submit" value="Submit"/>
                <a accesskey="r" href="#" onclick="new Ajax.Updater('preview', '/issues/preview/44624?project_id=lemonadearchitecture', {asynchronous:true, evalScripts:true, method:'post', onComplete:function(request){Element.scrollTo('preview')}, parameters:Form.serialize(&quot;issue-form&quot;) + '&amp;authenticity_token=' + encodeURIComponent('kxTyWm30BTKiEzZsa1SEE61FpeQ05Iz2HTZ44wspSFg=')}); return false;">
                </a>
              </form>
              <div id="preview" class="wiki">
              </div>
            </div>
            <p class="other-formats">
Also available in:              <span>
                <a href="/issues/44624.atom?key=4aa574c9e059cb38d85a8c5ac783b54345358b7b" class="atom" rel="nofollow">
Atom                </a>
              </span>
              <span>
                <a href="/issues/44624.pdf" class="pdf" rel="nofollow">
PDF                </a>
              </span>
            </p>
            <div id="context-menu" style="display: none;">
            </div>
            <div style="clear:both;">
            </div>
          </div>
        </div>
        <div id="ajax-indicator" style="display:none;">
          <span>
          </span>
        </div>
        <div id="footer">
          <div class="bgl">
            <div class="bgr">
Powered by              <a href="http://www.redmine.org/">
Redmine              </a>
© 2006-2010 Jean-Philippe Lang            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
